(function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)})({0:function(e,t,r){e.exports=r("2414")},"04f7":function(e,t){e.exports=require("@babel/runtime/helpers/esm/defineProperty")},"139f":function(e,t){e.exports=require("core-js/modules/es.array.for-each")},"169d":function(e,t){e.exports=require("core-js/modules/es.array.reduce")},"18d2":function(e,t){e.exports=require("core-js/modules/es.array.concat")},"1ce0":function(e,t){e.exports=require("core-js/modules/web.dom-collections.iterator")},2175:function(e,t){e.exports=require("core-js/modules/es.object.keys")},2414:function(e,t,r){"use strict";r.r(t);var n=r("8bbf"),o=r.n(n),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("SwallowForm",{attrs:{model:e.formData,"label-width":"120px",fields:e.fields}})},l=[],u=(r("bcd8"),r("5f72")),s=r.n(u),a=(r("2691"),r("f705"),r("5a5e")),c=r.n(a),f=(r("6049"),r("4a38"),r("139f"),r("6b07"),r("46bb"),r("2175"),r("bcda"),r("04f7")),p=r.n(f);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("6579"),r("850c"),r("5fef");var h=function(e){return Object.prototype.toString.call(e)},v=function(e,t){return h(e).slice(8,-1)===t};function b(e){return void 0!==e&&null!==e}function y(e){return void 0===e||null===e}function x(e){return v(e,"String")}function j(e){return v(e,"Object")}function g(e){return v(e,"Function")}function w(e){return v(e,"Array")}function O(e){return v(e,"Number")}function F(e){return b(e)&&"function"===typeof e.then&&"function"===typeof e.catch}r("9861"),r("907b"),r("1ce0");function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,r){return t&&q(e.prototype,t),r&&q(e,r),e}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("18d2"),r("ab7e"),r("dc05"),r("fd48"),r("169d"),r("51f7"),r("46fa");function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e,t){return g(e)?e:x(e)&&t?new Function(t,e):function(){return e}}function V(e){return F(e)?e:Promise.resolve(e)}function k(e,t){return t.reduce((function(t,r){return e&&P(e,r)&&(t[r]=e[r]),t}),{})}function D(e,t){var r=t.split(".");if(P(e,t))return e[t];var n=r.length,o=0;do{var i=r[o];if(!(i in e))break;e=e[i]}while(++o<n);return e}function C(e){if(!j(e))return e;var t=e.props;if(y(t))return e;var r=t.style,n=t.class;return Object.assign(e,{style:r,class:n})}var E,N,T=function(e,t){console.error("%c ".concat(e," error %c ").concat(t),"background:#e30;padding:1px;border-radius:3px;color:#fff","background:transparent")},I={props:{field:{type:Object,default:function(){return{}}},fieldModel:{type:Object,default:function(){return{}}}},computed:{value:{set:function(e){var t=this.fieldModel,r=this.field,n=r.type,o=r.prop;if(y(o))return T("swallow-form","el-".concat(n," 组件更新值缺少 fieldKey 或 prop 属性"));if(o.includes(".")){var i=o.lastIndexOf("."),l=o.slice(0,i),u=D(t,l);if(y(u))return T("swallow-form","el-".concat(n," 组件更新深度属性 ").concat(o," 的值，属性对象不存在"));this.setValue(u,o.slice(i+1),e)}else this.setValue(t,o,e)},get:function(){var e=this.fieldModel,t=this.field,r=t.type,n=t.prop;if(!y(n)){if(n.includes(".")){var o=n.lastIndexOf("."),i=n.slice(0,o),l=D(e,i);return y(l)?T("swallow-form","el-".concat(r," 组件获取深度属性 ").concat(n," 的值，属性对象不存在")):l[n.slice(o+1)]}return e[n]}}},VNodeData:function(){var e=this.fieldModel,t=this.privateProps,r=this.field,n=r.disabled,o=r.prop,i=r.props,l=r.on,u=r.style,s=r.class;if(b(n)){var a={model:e,prop:o};i.disabled=S(n)(a)}var c=Object.assign({},t,i),f=Object.assign({},l),p={width:"100%"};return{style:Object.assign(p,u),class:s,props:c,on:f}}},methods:{setValue:function(e,t,r){y(e[t])?this.$set(e,t,r):e[t]=r}}},A={name:"FieldInput",mixins:[I],render:function(){var e=this,t=arguments[0];return t("el-input",c()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},R=A;function z(e,t,r,n,o,i,l,u){var s,a="function"===typeof e?e.options:e;if(t&&(a.render=t,a.staticRenderFns=r,a._compiled=!0),n&&(a.functional=!0),i&&(a._scopeId="data-v-"+i),l?(s=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},a._ssrRegister=s):o&&(s=u?function(){o.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:o),s)if(a.functional){a._injectStyles=s;var c=a.render;a.render=function(e,t){return s.call(t),c(e,t)}}else{var f=a.beforeCreate;a.beforeCreate=f?[].concat(f,s):[s]}return{exports:e,options:a}}var L,U,X,K,B,G,H,J,Q,W,Y,Z,ee,te,re=z(R,E,N,!1,null,null,null),ne=re.exports,oe={data:function(){return{internalOptions:[]}},watch:{"field.options":{immediate:!0,handler:function(){var e=this,t=function(t){w(t)&&(e.internalOptions=t)},r=this.field.options,n=this.resolveOptions(r,t);n&&(this.loading=!0,n.then(t).finally((function(){e.loading=!1})))}}},methods:{resolveOptions:function(e,t){var r=null;return e&&(w(e)?r=Promise.resolve(e):g(e)?r=V(e(t)):F(e)&&(r=e)),r}}},ie={name:"FieldSelect",mixins:[I,oe],data:function(){return{loading:!1,privateProps:{filterable:!0,style:{width:"100%"}}}},render:function(){var e=this,t=arguments[0];return t("el-select",c()([{attrs:{loading:this.loading}},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]),[this.internalOptions.map((function(e){return t("el-option",{props:m({},e)})}))])}},le=ie,ue=z(le,L,U,!1,null,null,null),se=ue.exports,ae={name:"FieldNumber",mixins:[I],render:function(){var e=this,t=arguments[0];return t("el-input-number",c()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},ce=ae,fe=z(ce,X,K,!1,null,null,null),pe=fe.exports,de={name:"FieldInput",mixins:[I],render:function(){var e=this,t=arguments[0];return t("el-date-picker",c()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},me=de,he=z(me,B,G,!1,null,null,null),ve=he.exports,be={name:"FieldText",mixins:[I],render:function(){var e=arguments[0];return e("div",{class:"swallow-form__field__text"},[this.value])}},ye=be,xe=z(ye,H,J,!1,null,null,null),je=xe.exports,ge={props:{field:{type:Object,default:function(){return{}}},renderFields:{type:Function}},computed:{VNodeData:function(){return k(this.field,["props","style","class"])}}},we={name:"FieldRow",mixins:[ge],render:function(){var e=arguments[0];return e("el-row",c()([{},this.VNodeData]),[this.$slots.default])}},Oe=we,Fe=z(Oe,Q,W,!1,null,null,null),_e=Fe.exports,qe={name:"FieldCol",mixins:[ge],render:function(){var e=arguments[0];return e("el-col",c()([{},this.VNodeData]),[this.$slots.default])}},Me=qe,$e=z(Me,Y,Z,!1,null,null,null),Pe=$e.exports,Se=function(){function e(){_(this,e),$(this,"componentMap",new Map),this.componentMap.set("input",ne),this.componentMap.set("select",se),this.componentMap.set("number",pe),this.componentMap.set("date",ve),this.componentMap.set("text",je),this.componentMap.set("row",_e),this.componentMap.set("col",Pe)}return M(e,[{key:"add",value:function(e,t){if(this.componentMap.has(e))return T("".concat(e," 组件名称已被注册，请注册新的组件名称"));this.componentMap.set(e,t)}},{key:"has",value:function(e){return this.componentMap.has(e)}},{key:"get",value:function(e){return this.componentMap.get(e)}}]),e}(),Ve=new Se,ke=function(){return Ve.add.apply(Ve,arguments)},De=function(){return Ve.has.apply(Ve,arguments)},Ce=function(){return Ve.get.apply(Ve,arguments)},Ee={name:"SwallowForm",inheritAttrs:!1,props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{internalFields:[]}},computed:{mergedAttrs:function(){return Object.assign({size:"small"},this.$attrs)}},watch:{fields:{handler:function(e){this.internalFields=e},immediate:!0}},methods:{validate:function(){var e;return(e=this.$refs.elForm).validate.apply(e,arguments)},validateField:function(){var e;return(e=this.$refs.elForm).validateField.apply(e,arguments)},resetFields:function(){var e;return(e=this.$refs.elForm).resetFields.apply(e,arguments)},clearValidate:function(){var e;return(e=this.$refs.elForm).clearValidate.apply(e,arguments)},normalizeField:function(e){return w(e)?{type:"row",children:e}:e},renderFields:function(){var e=this;return this.fields.map((function(t){return e.renderField(t)}))},renderField:function(e){var t=this.$attrs.model,r={model:t,renderField:this.renderField},n=this.normalizeField(e);if(g(n))return n(r);var o=n.visible,i=n.prop,l={model:t,prop:i};if(!1===S(o)(l))return null;var u=this.renderChildren(n),s=this.renderFormItem(n,u),a=this.renderLayout(n,s);return a},renderChildren:function(e){var t,r,n=this.$createElement,o=this.$attrs.model,i=this.renderField,l=e.render,u=e.type,s=e.children,a=e.slots,c=void 0===a?{}:a;if(g(l))return l({model:o,renderField:i});if(c.default?r=c.default():w(s)&&(r=s.map((function(e){return i(e)}))),De(u)){var f=Ce(u);t=n(f,{attrs:{field:e,"field-model":o}},[r])}return t||r},renderFormItem:function(e,t){var r=this.$createElement,n=e.item,o=x(n)?{label:n}:n;return n?r("el-form-item",{props:m({},o)},[t]):t},renderLayout:function(e,t){var r=this.$createElement,n=e.layout,o=O(n)?{span:n}:n;return n?r("el-col",{props:m({},o)},[t]):t}},render:function(){var e=arguments[0];return e("el-form",c()([{ref:"elForm"},C({props:this.mergedAttrs})]),[this.renderFields()])}},Ne=Ee,Te=z(Ne,ee,te,!1,null,null,null),Ie=Te.exports;function Ae(e,t){var r=function(r){return r.component(e,t)};return t.install=r,window&&window.Vue&&r(window.Vue),t}o.a.use(s.a);Ae(Ie.name,Ie);var Re={name:"abc",props:["field","fieldModel"],data:function(){return{count:0}},render:function(){var e=this,t=arguments[0],r=this.field.prop;return t("input",{domProps:{value:this.fieldModel[r]},on:{change:function(){return e.$set(e.fieldModel,r,12)}}})}};ke("abc",Re);var ze={name:"App",components:{SwallowForm:Ie},data:function(){var e=this.$createElement;return{formData:{},fields:[{type:"row",children:[{type:"input",prop:"xxx",item:"输入框",layout:8},{type:"select",prop:"yyy",item:{label:"选择框"},layout:{span:8},options:[{label:"1",value:1},{label:"2",value:2}]},function(t){var r=t.model,n=t.renderField;return n({type:"text",layout:{span:8},item:{label:"谁谁谁"},render:function(){return e("span",["选中值：",r.yyy])}})}]},[{type:"input",prop:"xxx",item:{label:"输入框"},layout:{span:8}},{type:"input",prop:"xxx",item:{label:"输入框"},layout:{span:8}},{type:"input",prop:"xxx",item:{label:"输入框"},layout:{span:4}},{type:"input",prop:"xxx",item:{label:"输入框"},layout:{span:4}}]]}}},Le=ze,Ue=z(Le,i,l,!1,null,null,null),Xe=Ue.exports;o.a.config.productionTip=!1,new o.a({render:function(e){return e(Xe)}}).$mount("#app")},2691:function(e,t){e.exports=require("element-ui/lib/theme-chalk/index.css")},"46bb":function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptors")},"46fa":function(e,t){e.exports=require("core-js/modules/es.string.split")},"4a38":function(e,t){e.exports=require("core-js/modules/es.array.filter")},"51f7":function(e,t){e.exports=require("core-js/modules/es.regexp.exec")},"5a5e":function(e,t){e.exports=require("@vue/babel-helper-vue-jsx-merge-props")},"5f72":function(e,t){e.exports=void 0},"5fef":function(e,t){e.exports=require("core-js/modules/es.regexp.to-string")},6049:function(e,t){e.exports=require("core-js/modules/es.symbol")},6579:function(e,t){e.exports=require("core-js/modules/es.array.slice")},"6b07":function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptor")},"850c":function(e,t){e.exports=require("core-js/modules/es.object.to-string")},"8bbf":function(e,t){e.exports=require("vue")},"907b":function(e,t){e.exports=require("core-js/modules/es.string.iterator")},9861:function(e,t){e.exports=require("core-js/modules/es.map")},ab7e:function(e,t){e.exports=require("core-js/modules/es.array.includes")},bcd8:function(e,t){e.exports=require("core-js/modules/es.function.name")},bcda:function(e,t){e.exports=require("core-js/modules/web.dom-collections.for-each")},dc05:function(e,t){e.exports=require("core-js/modules/es.array.last-index-of")},f705:function(e,t){e.exports=require("core-js/modules/es.array.map")},fd48:function(e,t){e.exports=require("core-js/modules/es.string.includes")}});