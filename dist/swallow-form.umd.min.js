(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["swallow-form"]=t():e["swallow-form"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="fb15")}({"00c5":function(e,t){e.exports=require("element-ui/lib/theme-chalk/form.css")},"04f7":function(e,t){e.exports=require("@babel/runtime/helpers/esm/defineProperty")},"0de2":function(e,t){e.exports=require("element-ui/lib/select")},"0fe2":function(e,t){e.exports=require("element-ui/lib/theme-chalk/select.css")},"139f":function(e,t){e.exports=require("core-js/modules/es.array.for-each")},"169d":function(e,t){e.exports=require("core-js/modules/es.array.reduce")},"18d2":function(e,t){e.exports=require("core-js/modules/es.array.concat")},"1ce0":function(e,t){e.exports=require("core-js/modules/web.dom-collections.iterator")},2175:function(e,t){e.exports=require("core-js/modules/es.object.keys")},"354b":function(e,t){e.exports=require("element-ui/lib/form")},"43c2":function(e,t){e.exports=require("element-ui/lib/input-number")},"46bb":function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptors")},"46fa":function(e,t){e.exports=require("core-js/modules/es.string.split")},"4a38":function(e,t){e.exports=require("core-js/modules/es.array.filter")},"51f7":function(e,t){e.exports=require("core-js/modules/es.regexp.exec")},"5a5e":function(e,t){e.exports=require("@vue/babel-helper-vue-jsx-merge-props")},"5fef":function(e,t){e.exports=require("core-js/modules/es.regexp.to-string")},6049:function(e,t){e.exports=require("core-js/modules/es.symbol")},6579:function(e,t){e.exports=require("core-js/modules/es.array.slice")},"6b07":function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptor")},"6e25":function(e,t){e.exports=require("element-ui/lib/date-picker")},"6ea3":function(e,t){e.exports=require("element-ui/lib/row")},"703d":function(e,t){e.exports=require("element-ui/lib/theme-chalk/col.css")},"80c4":function(e,t){e.exports=require("element-ui/lib/theme-chalk/option.css")},8495:function(e,t){e.exports=require("core-js/modules/es.promise")},"850c":function(e,t){e.exports=require("core-js/modules/es.object.to-string")},"8bbf":function(e,t){e.exports=require("vue")},"8c84":function(e,t){e.exports=require("core-js/modules/es.array.iterator")},"907b":function(e,t){e.exports=require("core-js/modules/es.string.iterator")},9861:function(e,t){e.exports=require("core-js/modules/es.map")},"9a25":function(e,t){e.exports=require("element-ui/lib/theme-chalk/base.css")},"9bb0":function(e,t){e.exports=require("@soda/get-current-script")},a497:function(e,t){e.exports=require("element-ui/lib/col")},a9f8:function(e,t){e.exports=require("element-ui/lib/theme-chalk/input.css")},ab7e:function(e,t){e.exports=require("core-js/modules/es.array.includes")},b29c:function(e,t){e.exports=require("element-ui/lib/theme-chalk/form-item.css")},b917:function(e,t){e.exports=require("core-js/modules/es.object.assign")},bcd8:function(e,t){e.exports=require("core-js/modules/es.function.name")},bcda:function(e,t){e.exports=require("core-js/modules/web.dom-collections.for-each")},c11a:function(e,t){e.exports=require("element-ui/lib/option")},cebf:function(e,t){e.exports=require("element-ui/lib/theme-chalk/input-number.css")},dc05:function(e,t){e.exports=require("core-js/modules/es.array.last-index-of")},e67a:function(e,t){e.exports=require("element-ui/lib/input")},e8f3:function(e,t){e.exports=require("element-ui/lib/theme-chalk/date-picker.css")},f705:function(e,t){e.exports=require("core-js/modules/es.array.map")},f787:function(e,t){e.exports=require("element-ui/lib/form-item")},f96d:function(e,t){e.exports=require("core-js/modules/es.promise.finally")},fb15:function(e,t,r){"use strict";if(r.r(t),r.d(t,"SwallowForm",(function(){return rt})),r.d(t,"add",(function(){return Ye})),r.d(t,"get",(function(){return We})),r.d(t,"has",(function(){return Qe})),"undefined"!==typeof window){var n=window.document.currentScript,o=r("9bb0");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(r.p=i[1])}r("bcd8"),r("00c5"),r("9a25");var u=r("354b"),s=r.n(u),l=(r("b29c"),r("f787")),c=r.n(l),a=(r("fd9c"),r("6ea3")),f=r.n(a),d=(r("703d"),r("a497")),p=r.n(d),m=(r("cebf"),r("43c2")),b=r.n(m),h=(r("e8f3"),r("6e25")),v=r.n(h),x=(r("80c4"),r("c11a")),y=r.n(x),j=(r("0fe2"),r("0de2")),w=r.n(j),g=(r("a9f8"),r("e67a")),q=r.n(g),O=r("8bbf"),F=r.n(O);F.a.use(q.a),F.a.use(w.a),F.a.use(y.a),F.a.use(v.a),F.a.use(b.a),F.a.use(p.a),F.a.use(f.a),F.a.use(c.a),F.a.use(s.a);r("f705"),r("b917");var _=r("5a5e"),k=r.n(_),M=(r("6049"),r("4a38"),r("139f"),r("6b07"),r("46bb"),r("2175"),r("bcda"),r("04f7")),P=r.n(M);function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("8c84"),r("9861"),r("850c"),r("907b"),r("1ce0");function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t,r){return t&&C(e.prototype,t),r&&C(e,r),e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("18d2"),r("ab7e"),r("dc05"),r("6579"),r("fd48"),r("5fef");var E=function(e){return Object.prototype.toString.call(e)},T=function(e,t){return E(e).slice(8,-1)===t};function I(e){return void 0!==e&&null!==e}function R(e){return void 0===e||null===e}function A(e){return T(e,"String")}function z(e){return T(e,"Object")}function L(e){return T(e,"Function")}function U(e){return T(e,"Array")}function X(e){return T(e,"Number")}function B(e){return I(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function G(e){var t=new F.a,r=t.$createElement();return e instanceof r.constructor}r("169d"),r("8495"),r("51f7"),r("46fa");function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function J(e,t){return L(e)?e:A(e)&&t?new Function(t,e):function(){return e}}function K(e){return B(e)?e:Promise.resolve(e)}function Q(e,t){return t.reduce((function(t,r){return e&&H(e,r)&&(t[r]=e[r]),t}),{})}function W(e,t){var r=t.split(".");if(H(e,t))return e[t];var n=r.length,o=0;do{var i=r[o];if(!(i in e))break;e=e[i]}while(++o<n);return e}function Y(e){if(!z(e))return e;var t=e.props;if(R(t))return e;var r=t.style,n=t.class;return Object.assign(e,{style:r,class:n})}var Z,ee,te=function(e,t){console.error("%c ".concat(e," error %c ").concat(t),"background:#e30;padding:1px;border-radius:3px;color:#fff","background:transparent")},re={props:{field:{type:Object,default:function(){return{}}},fieldModel:{type:Object,default:function(){return{}}}},computed:{value:{set:function(e){var t=this.fieldModel,r=this.field,n=r.type,o=r.prop;if(R(o))return te("swallow-form","el-".concat(n," 组件更新值缺少 prop 属性"));if(o.includes(".")){var i=o.lastIndexOf("."),u=o.slice(0,i),s=W(t,u);if(R(s))return te("swallow-form","el-".concat(n," 组件更新深度属性 ").concat(o," 的值，属性对象不存在"));this.setValue(s,o.slice(i+1),e)}else this.setValue(t,o,e)},get:function(){var e=this.fieldModel,t=this.field,r=t.type,n=t.prop;if(!R(n)){if(n.includes(".")){var o=n.lastIndexOf("."),i=n.slice(0,o),u=W(e,i);return R(u)?te("swallow-form","el-".concat(r," 组件获取深度属性 ").concat(n," 的值，属性对象不存在")):u[n.slice(o+1)]}return e[n]}}},VNodeData:function(){var e=this.fieldModel,t=this.privateProps,r=this.field,n=r.disabled,o=r.prop,i=r.on,u=r.style,s=r.class,l=r.props,c=void 0===l?{}:l;if(I(n)){var a={model:e,prop:o};c.disabled=J(n)(a)}var f=Object.assign({},t,c),d=Object.assign({},i),p={width:"100%"};return{style:Object.assign(p,u),class:s,props:f,on:d}}},methods:{setValue:function(e,t,r){R(e[t])?this.$set(e,t,r):e[t]=r}}},ne={name:"FieldInput",mixins:[re],render:function(){var e=this,t=arguments[0];return t("el-input",k()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},oe=ne;function ie(e,t,r,n,o,i,u,s){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),u?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(u)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var a=c.render;c.render=function(e,t){return l.call(t),a(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,l):[l]}return{exports:e,options:c}}var ue,se,le,ce,ae,fe,de,pe,me,be,he,ve,xe,ye,je=ie(oe,Z,ee,!1,null,null,null),we=je.exports,ge=(r("f96d"),{data:function(){return{internalOptions:[]}},watch:{"field.options":{immediate:!0,handler:function(){var e=this,t=function(t){U(t)&&(e.internalOptions=t)},r=this.field.options,n=this.resolveOptions(r,t);n&&(this.loading=!0,n.then(t).finally((function(){e.loading=!1})))}}},methods:{resolveOptions:function(e,t){var r=null;return e&&(U(e)?r=Promise.resolve(e):L(e)?r=K(e(t)):B(e)&&(r=e)),r}}}),qe={name:"FieldSelect",mixins:[re,ge],data:function(){return{loading:!1,privateProps:{filterable:!0,style:{width:"100%"}}}},render:function(){var e=this,t=arguments[0];return t("el-select",k()([{attrs:{loading:this.loading}},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]),[this.internalOptions.map((function(e){return t("el-option",{props:S({},e)})}))])}},Oe=qe,Fe=ie(Oe,ue,se,!1,null,null,null),_e=Fe.exports,ke={name:"FieldNumber",mixins:[re],render:function(){var e=this,t=arguments[0];return t("el-input-number",k()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},Me=ke,Pe=ie(Me,le,ce,!1,null,null,null),$e=Pe.exports,Se={name:"FieldInput",mixins:[re],render:function(){var e=this,t=arguments[0];return t("el-date-picker",k()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},Ve=Se,Ce=ie(Ve,ae,fe,!1,null,null,null),De=Ce.exports,Ne={name:"FieldText",mixins:[re],render:function(){var e=arguments[0];return e("div",{class:"swallow-form__field__text"},[this.value])}},Ee=Ne,Te=ie(Ee,de,pe,!1,null,null,null),Ie=Te.exports,Re={props:{field:{type:Object,default:function(){return{}}}},computed:{VNodeData:function(){return Q(this.field,["props","style","class"])}}},Ae={name:"FieldRow",mixins:[Re],render:function(){var e=arguments[0];return e("el-row",k()([{},this.VNodeData]),[this.$slots.default])}},ze=Ae,Le=ie(ze,me,be,!1,null,null,null),Ue=Le.exports,Xe={name:"FieldCol",mixins:[Re],render:function(){var e=arguments[0];return e("el-col",k()([{},this.VNodeData]),[this.$slots.default])}},Be=Xe,Ge=ie(Be,he,ve,!1,null,null,null),He=Ge.exports,Je=function(){function e(){V(this,e),N(this,"componentMap",new Map),this.componentMap.set("input",we),this.componentMap.set("select",_e),this.componentMap.set("number",$e),this.componentMap.set("date",De),this.componentMap.set("text",Ie),this.componentMap.set("row",Ue),this.componentMap.set("col",He)}return D(e,[{key:"add",value:function(e,t){if(this.componentMap.has(e))return te(e,"".concat(e," 组件名称已被注册，请注册新的组件名称"));this.componentMap.set(e,t)}},{key:"has",value:function(e){return this.componentMap.has(e)}},{key:"get",value:function(e){return this.componentMap.get(e)}}]),e}(),Ke=new Je,Qe=function(){return Ke.has.apply(Ke,arguments)},We=function(){return Ke.get.apply(Ke,arguments)},Ye=function(){return Ke.add.apply(Ke,arguments)},Ze={name:"SwallowForm",inheritAttrs:!1,props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{internalFields:[]}},computed:{mergedAttrs:function(){return Object.assign({size:"small"},this.$attrs)}},watch:{fields:{handler:function(e){this.internalFields=e},immediate:!0}},methods:{validate:function(){var e;return(e=this.$refs.elForm).validate.apply(e,arguments)},validateField:function(){var e;return(e=this.$refs.elForm).validateField.apply(e,arguments)},resetFields:function(){var e;return(e=this.$refs.elForm).resetFields.apply(e,arguments)},clearValidate:function(){var e;return(e=this.$refs.elForm).clearValidate.apply(e,arguments)},normalizeField:function(e){return U(e)?{type:"row",children:e}:e},renderFields:function(){var e=this;return this.fields.map((function(t){return e.renderField(t)}))},renderField:function(e){var t=this.$attrs.model,r={model:t,renderField:this.renderField},n=this.normalizeField(e);if(G(n))return n;if(L(n))return n(r);var o=n.visible,i=n.prop,u={model:t,prop:i};if(!1===J(o)(u))return null;var s=this.renderChildren(n),l=this.renderFormItem(n,s),c=this.renderLayout(n,l);return c},renderChildren:function(e){var t,r,n=this.$createElement,o=this.$attrs.model,i=this.renderField,u=e.render,s=e.type,l=e.children,c=e.slots,a=void 0===c?{}:c;if(L(u))return u({model:o,renderField:i});if(a.default?r=a.default():U(l)&&(r=l.map((function(e){return i(e)}))),Qe(s)){var f=We(s),d=S(S({},Q(e,["on","slots"])),{},{props:Object.assign({},e.props,{field:e,fieldModel:o})});t=n(f,k()([{},d]),[r])}return t||r},renderFormItem:function(e,t){var r=this.$createElement,n=e.item,o=A(n)?{label:n}:n;return n?r("el-form-item",{props:S({},o)},[t]):t},renderLayout:function(e,t){var r=this.$createElement,n=e.layout,o=X(n)?{span:n}:n;return n?r("el-col",{props:S({},o)},[t]):t}},render:function(){var e=arguments[0];return e("el-form",k()([{ref:"elForm"},Y({props:this.mergedAttrs})]),[this.renderFields()])}},et=Ze,tt=ie(et,xe,ye,!1,null,null,null),rt=tt.exports;function nt(e,t){var r=function(r){return r.component(e,t)};return t.install=r,window&&window.Vue&&r(window.Vue),t}var ot=nt(rt.name,rt);t["default"]=ot},fd48:function(e,t){e.exports=require("core-js/modules/es.string.includes")},fd9c:function(e,t){e.exports=require("element-ui/lib/theme-chalk/row.css")}})}));