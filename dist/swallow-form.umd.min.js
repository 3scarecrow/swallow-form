(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("element-ui")):"function"===typeof define&&define.amd?define(["element-ui"],t):"object"===typeof exports?exports["swallow-form"]=t(require("element-ui")):e["swallow-form"]=t(e["ELEMENT"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="fb15")}({"04f7":function(e,t){e.exports=require("@babel/runtime/helpers/esm/defineProperty")},"139f":function(e,t){e.exports=require("core-js/modules/es.array.for-each")},"169d":function(e,t){e.exports=require("core-js/modules/es.array.reduce")},"18d2":function(e,t){e.exports=require("core-js/modules/es.array.concat")},"1ce0":function(e,t){e.exports=require("core-js/modules/web.dom-collections.iterator")},2175:function(e,t){e.exports=require("core-js/modules/es.object.keys")},2691:function(e,t){e.exports=require("element-ui/lib/theme-chalk/index.css")},"46bb":function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptors")},"46fa":function(e,t){e.exports=require("core-js/modules/es.string.split")},"4a38":function(e,t){e.exports=require("core-js/modules/es.array.filter")},"51f7":function(e,t){e.exports=require("core-js/modules/es.regexp.exec")},"5a5e":function(e,t){e.exports=require("@vue/babel-helper-vue-jsx-merge-props")},"5f72":function(t,r){t.exports=e},"5fef":function(e,t){e.exports=require("core-js/modules/es.regexp.to-string")},6049:function(e,t){e.exports=require("core-js/modules/es.symbol")},6579:function(e,t){e.exports=require("core-js/modules/es.array.slice")},"6b07":function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptor")},"850c":function(e,t){e.exports=require("core-js/modules/es.object.to-string")},"8bbf":function(e,t){e.exports=require("vue")},"907b":function(e,t){e.exports=require("core-js/modules/es.string.iterator")},9861:function(e,t){e.exports=require("core-js/modules/es.map")},"9bb0":function(e,t){e.exports=require("@soda/get-current-script")},ab7e:function(e,t){e.exports=require("core-js/modules/es.array.includes")},bcd8:function(e,t){e.exports=require("core-js/modules/es.function.name")},bcda:function(e,t){e.exports=require("core-js/modules/web.dom-collections.for-each")},dc05:function(e,t){e.exports=require("core-js/modules/es.array.last-index-of")},f705:function(e,t){e.exports=require("core-js/modules/es.array.map")},fb15:function(e,t,r){"use strict";if(r.r(t),r.d(t,"SwallowForm",(function(){return Re})),r.d(t,"register",(function(){return Ee})),"undefined"!==typeof window){var n=window.document.currentScript,o=r("9bb0");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(r.p=i[1])}r("bcd8");var u=r("8bbf"),s=r.n(u),l=r("5f72"),c=r.n(l),a=(r("2691"),r("f705"),r("5a5e")),f=r.n(a),d=(r("6049"),r("4a38"),r("139f"),r("6b07"),r("46bb"),r("2175"),r("bcda"),r("04f7")),p=r.n(d);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("6579"),r("850c"),r("5fef");var b=function(e){return Object.prototype.toString.call(e)},v=function(e,t){return b(e).slice(8,-1)===t};function y(e){return void 0!==e&&null!==e}function x(e){return void 0===e||null===e}function j(e){return v(e,"String")}function w(e){return v(e,"Object")}function g(e){return v(e,"Function")}function O(e){return v(e,"Array")}function F(e){return v(e,"Number")}function q(e){return y(e)&&"function"===typeof e.then&&"function"===typeof e.catch}r("9861"),r("907b"),r("1ce0");function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,r){return t&&M(e.prototype,t),r&&M(e,r),e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("18d2"),r("ab7e"),r("dc05"),r("fd48"),r("169d"),r("51f7"),r("46fa");function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function V(e,t){return g(e)?e:j(e)&&t?new Function(t,e):function(){return e}}function k(e){return q(e)?e:Promise.resolve(e)}function E(e,t){return t.reduce((function(t,r){return e&&$(e,r)&&(t[r]=e[r]),t}),{})}function N(e,t){var r=t.split(".");if($(e,t))return e[t];var n=r.length,o=0;do{var i=r[o];if(!(i in e))break;e=e[i]}while(++o<n);return e}function C(e){if(!w(e))return e;var t=e.props;if(x(t))return e;var r=t.style,n=t.class;return Object.assign(e,{style:r,class:n})}var D,T,I=function(e,t){console.error("%c ".concat(e," error %c ").concat(t),"background:#e30;padding:1px;border-radius:3px;color:#fff","background:transparent")},R={props:{field:{type:Object,default:function(){return{}}},fieldModel:{type:Object,default:function(){return{}}}},computed:{value:{set:function(e){var t=this.fieldModel,r=this.field,n=r.type,o=r.prop;if(x(o))return I("swallow-form","el-".concat(n," 组件更新值缺少 fieldKey 或 prop 属性"));if(o.includes(".")){var i=o.lastIndexOf("."),u=o.slice(0,i),s=N(t,u);if(x(s))return I("swallow-form","el-".concat(n," 组件更新深度属性 ").concat(o," 的值，属性对象不存在"));this.setValue(s,o.slice(i+1),e)}else this.setValue(t,o,e)},get:function(){var e=this.fieldModel,t=this.field,r=t.type,n=t.prop;if(!x(n)){if(n.includes(".")){var o=n.lastIndexOf("."),i=n.slice(0,o),u=N(e,i);return x(u)?I("swallow-form","el-".concat(r," 组件获取深度属性 ").concat(n," 的值，属性对象不存在")):u[n.slice(o+1)]}return e[n]}}},VNodeData:function(){var e=this.fieldModel,t=this.privateProps,r=this.field,n=r.disabled,o=r.prop,i=r.props,u=r.on,s=r.style,l=r.class;if(y(n)){var c={model:e,prop:o};i.disabled=V(n)(c)}var a=Object.assign({},t,i),f=Object.assign({},u),d={width:"100%"};return{style:Object.assign(d,s),class:l,props:a,on:f}}},methods:{setValue:function(e,t,r){x(e[t])?this.$set(e,t,r):e[t]=r}}},A={name:"FieldInput",mixins:[R],render:function(){var e=this,t=arguments[0];return t("el-input",f()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},z=A;function L(e,t,r,n,o,i,u,s){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),u?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(u)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var a=c.render;c.render=function(e,t){return l.call(t),a(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,l):[l]}return{exports:e,options:c}}var U,X,K,B,G,H,J,Q,W,Y,Z,ee,te,re,ne=L(z,D,T,!1,null,null,null),oe=ne.exports,ie={data:function(){return{internalOptions:[]}},watch:{"field.options":{immediate:!0,handler:function(){var e=this,t=function(t){O(t)&&(e.internalOptions=t)},r=this.field.options,n=this.resolveOptions(r,t);n&&(this.loading=!0,n.then(t).finally((function(){e.loading=!1})))}}},methods:{resolveOptions:function(e,t){var r=null;return e&&(O(e)?r=Promise.resolve(e):g(e)?r=k(e(t)):q(e)&&(r=e)),r}}},ue={name:"FieldSelect",mixins:[R,ie],data:function(){return{loading:!1,privateProps:{filterable:!0,style:{width:"100%"}}}},render:function(){var e=this,t=arguments[0];return t("el-select",f()([{attrs:{loading:this.loading}},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]),[this.internalOptions.map((function(e){return t("el-option",{props:h({},e)})}))])}},se=ue,le=L(se,U,X,!1,null,null,null),ce=le.exports,ae={name:"FieldNumber",mixins:[R],render:function(){var e=this,t=arguments[0];return t("el-input-number",f()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},fe=ae,de=L(fe,K,B,!1,null,null,null),pe=de.exports,me={name:"FieldInput",mixins:[R],render:function(){var e=this,t=arguments[0];return t("el-date-picker",f()([{},this.VNodeData,{model:{value:e.value,callback:function(t){e.value=t}}}]))}},he=me,be=L(he,G,H,!1,null,null,null),ve=be.exports,ye={name:"FieldText",mixins:[R],render:function(){var e=arguments[0];return e("div",{class:"swallow-form__field__text"},[this.value])}},xe=ye,je=L(xe,J,Q,!1,null,null,null),we=je.exports,ge={props:{field:{type:Object,default:function(){return{}}},renderFields:{type:Function}},computed:{VNodeData:function(){return E(this.field,["props","style","class"])}}},Oe={name:"FieldRow",mixins:[ge],render:function(){var e=arguments[0];return e("el-row",f()([{},this.VNodeData]),[this.$slots.default])}},Fe=Oe,qe=L(Fe,W,Y,!1,null,null,null),_e=qe.exports,Me={name:"FieldCol",mixins:[ge],render:function(){var e=arguments[0];return e("el-col",f()([{},this.VNodeData]),[this.$slots.default])}},Pe=Me,Se=L(Pe,Z,ee,!1,null,null,null),$e=Se.exports,Ve=function(){function e(){_(this,e),S(this,"componentMap",new Map),this.componentMap.set("input",oe),this.componentMap.set("select",ce),this.componentMap.set("number",pe),this.componentMap.set("date",ve),this.componentMap.set("text",we),this.componentMap.set("row",_e),this.componentMap.set("col",$e)}return P(e,[{key:"add",value:function(e,t){if(this.componentMap.has(e))return I("".concat(e," 组件名称已被注册，请注册新的组件名称"));this.componentMap.set(e,t)}},{key:"has",value:function(e){return this.componentMap.has(e)}},{key:"get",value:function(e){return this.componentMap.get(e)}}]),e}(),ke=new Ve,Ee=function(){return ke.add.apply(ke,arguments)},Ne=function(){return ke.has.apply(ke,arguments)},Ce=function(){return ke.get.apply(ke,arguments)},De={name:"SwallowForm",inheritAttrs:!1,props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{internalFields:[]}},computed:{mergedAttrs:function(){return Object.assign({size:"small"},this.$attrs)}},watch:{fields:{handler:function(e){this.internalFields=e},immediate:!0}},methods:{validate:function(){var e;return(e=this.$refs.elForm).validate.apply(e,arguments)},validateField:function(){var e;return(e=this.$refs.elForm).validateField.apply(e,arguments)},resetFields:function(){var e;return(e=this.$refs.elForm).resetFields.apply(e,arguments)},clearValidate:function(){var e;return(e=this.$refs.elForm).clearValidate.apply(e,arguments)},normalizeField:function(e){return O(e)?{type:"row",children:e}:e},renderFields:function(){var e=this;return this.fields.map((function(t){return e.renderField(t)}))},renderField:function(e){var t=this.$attrs.model,r={model:t,renderField:this.renderField},n=this.normalizeField(e);if(g(n))return n(r);var o=n.visible,i=n.prop,u={model:t,prop:i};if(!1===V(o)(u))return null;var s=this.renderChildren(n),l=this.renderFormItem(n,s),c=this.renderLayout(n,l);return c},renderChildren:function(e){var t,r,n=this.$createElement,o=this.$attrs.model,i=this.renderField,u=e.render,s=e.type,l=e.children,c=e.slots,a=void 0===c?{}:c;if(g(u))return u({model:o,renderField:i});if(a.default?r=a.default():O(l)&&(r=l.map((function(e){return i(e)}))),Ne(s)){var f=Ce(s);t=n(f,{attrs:{field:e,"field-model":o}},[r])}return t||r},renderFormItem:function(e,t){var r=this.$createElement,n=e.item,o=j(n)?{label:n}:n;return n?r("el-form-item",{props:h({},o)},[t]):t},renderLayout:function(e,t){var r=this.$createElement,n=e.layout,o=F(n)?{span:n}:n;return n?r("el-col",{props:h({},o)},[t]):t}},render:function(){var e=arguments[0];return e("el-form",f()([{ref:"elForm"},C({props:this.mergedAttrs})]),[this.renderFields()])}},Te=De,Ie=L(Te,te,re,!1,null,null,null),Re=Ie.exports;function Ae(e,t){var r=function(r){return r.component(e,t)};return t.install=r,window&&window.Vue&&r(window.Vue),t}s.a.use(c.a);var ze=Ae(Re.name,Re);t["default"]=ze},fd48:function(e,t){e.exports=require("core-js/modules/es.string.includes")}})}));